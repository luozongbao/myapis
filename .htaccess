# Root .htaccess - Redirect all requests to public directory
# Place this file in the project root (/home/zongbao/var/www/lab/)

RewriteEngine On

# Redirect everything to public directory except already in public
RewriteCond %{REQUEST_URI} !^/public/
RewriteCond %{REQUEST_URI} !^/api/
RewriteRule ^(.*)$ public/$1 [L]

# Security - Block access to sensitive files in root
<Files ~ "^\.(htaccess|gitignore|env)">
    Order allow,deny
    Deny from all
</Files>

<Files ~ "(README\.md|composer\.(json|lock))$">
    Order allow,deny
    Deny from all
</Files>

# Block direct access to old structure directories
<Directory "health-calculator">
    Order deny,allow
    Deny from all
</Directory>

<Directory "password-generator">
    Order deny,allow
    Deny from all
</Directory>

<Directory "username-generator">
    Order deny,allow
    Deny from all
</Directory>

<Directory "promptpay-qr-generator">
    Order deny,allow
    Deny from all
</Directory>

<Directory "fortune-teller">
    Order deny,allow
    Deny from all
</Directory>

<Directory "randomizer">
    Order deny,allow
    Deny from all
</Directory>
